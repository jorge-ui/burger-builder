{"version":3,"sources":["Components/CheckoutModal/Subcomponents/CheckoutForm/CheckoutForm.js","Components/CheckoutModal/CheckoutModal.js","Components/CheckoutModal/CheckoutModal.module.scss","Components/CheckoutModal/Subcomponents/CheckoutForm/CheckoutForm.module.scss"],"names":["CheckoutForm","state","error","loading","success","this","props","total","onSuccess","amount","Object","keys","length","cardHelp","message","code","className","styles","style","marginBottom","color","backgroundColor","onClick","setState","token","stripeKey","name","Component","CheckoutModal","setShowModal","order","useState","setSuccess","hideModal","container","document","querySelector","transform","opacity","show","useEffect","summary","entries","filter","el","count","map","reduce","sum","price","toFixed","close","setTimeout","click","height","renderSuccess","id","target","contains","head","icon","summaryLine","itemsList","i","key","formWrap","Number","module","exports"],"mappings":"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","file":"static/js/7.52ae361d.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport styles from './CheckoutForm.module.scss';\r\nimport axios from 'axios';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport StripeCheckout from 'react-stripe-checkout';\r\n\r\nclass CheckoutForm extends Component {\r\n  state = {\r\n    error: {},\r\n    loading: false,\r\n    success: false\r\n  };\r\n\r\n  render() {\r\n    const { error, loading } = this.state;\r\n    const { total, onSuccess } = this.props;\r\n    const amount = total * 100;\r\n    // render success\r\n    // render errors if any\r\n    if (Object.keys(error).length) {\r\n      let { message, code } = error;\r\n      let cardHelp;\r\n      if (code === 'incomplete_number' || code === 'invalid_number') {\r\n        cardHelp = (\r\n          <div>\r\n            Use <strong>4242 4242 4242 4242</strong> for dummie card number.\r\n          </div>\r\n        );\r\n      }\r\n      // show errors render\r\n      return (\r\n        <div className={styles.CheckoutForm} style={{ marginBottom: '15px' }}>\r\n          <div style={{ color: 'red' }}>{message}</div>\r\n          {cardHelp ? cardHelp : null}\r\n          <button\r\n            style={{ backgroundColor: '#ccbc53' }}\r\n            onClick={() => this.setState({ error: {} })}\r\n          >\r\n            Try again\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n    // main component render\r\n    return (\r\n      <StripeCheckout\r\n        token={onSuccess}\r\n        stripeKey=\"pk_test_ISm2ExeGCOVKScWl1rmNU1KT00cz3zAHZo\"\r\n        name=\"Burger Builder Ltd.\"\r\n        amount={amount}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default CheckoutForm;\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './CheckoutModal.module.scss';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport CheckoutForm from './Subcomponents/CheckoutForm/CheckoutForm';\r\n\r\nconst CheckoutModal = ({ setShowModal, order }) => {\r\n  const [success, setSuccess] = useState(false);\r\n  // component effect\r\n  useEffect(() => {\r\n    let container = document.querySelector(`.${styles.container}`);\r\n    container.style.transform = 'unset';\r\n    container.style.opacity = 'unset';\r\n    document.querySelector(`.${styles.CheckoutModal}`).style.backgroundColor =\r\n      '#000000b5';\r\n  }, []);\r\n\r\n  function hideModal() {\r\n    let container = document.querySelector(`.${styles.container}`);\r\n    container.style.transform = null;\r\n    container.style.opacity = null;\r\n    document.querySelector(\r\n      `.${styles.CheckoutModal}`\r\n    ).style.backgroundColor = null;\r\n    setShowModal({ show: false, order: {} });\r\n  }\r\n\r\n  function renderSuccess() {\r\n    let close = document.querySelector('#closeBuilder');\r\n    setTimeout(() => close && close.click(), 1000);\r\n    setTimeout(\r\n      () =>\r\n        (document.querySelector(`.${styles.container}`).style.height = '350px'),\r\n      100\r\n    );\r\n  }\r\n\r\n  let summary = Object.entries(order)\r\n    .filter(el => el[1].count > 0)\r\n    .map(el => ({ ...el[1], name: el[0] }));\r\n  let total = summary\r\n    .reduce((sum, { price, count }) => (sum = sum + price * count), 0)\r\n    .toFixed(2);\r\n  if (success) {\r\n    renderSuccess();\r\n    return (\r\n      <div\r\n        id=\"CheckoutModal\"\r\n        className={styles.CheckoutModal}\r\n        onClick={({ target }) => {\r\n          // close if clicked outside of container\r\n          target.contains(document.querySelector('#CheckoutModal')) &&\r\n            hideModal();\r\n        }}\r\n      >\r\n        <div className={styles.container}>\r\n          <div className={styles.success}>\r\n            <span>Success! Enjoy your burger! :)</span>\r\n            <button onClick={hideModal}>Ok!</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function onSuccess() {\r\n    setTimeout(() => setSuccess(true), 550);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      id=\"CheckoutModal\"\r\n      className={styles.CheckoutModal}\r\n      onClick={({ target }) => {\r\n        // close if clicked outside of container\r\n        target.contains(document.querySelector('#CheckoutModal')) &&\r\n          hideModal();\r\n      }}\r\n    >\r\n      <div className={styles.container}>\r\n        {/* Head */}\r\n        <div className={styles.head}>\r\n          <div id=\"closeModal\" onClick={hideModal} className={styles.close}>\r\n            <FontAwesomeIcon icon=\"times\" />\r\n          </div>\r\n        </div>\r\n        {/* Body */}\r\n        <div className=\"container container-summary\">\r\n          <h3>\r\n            <strong>Order Summary</strong>\r\n          </h3>\r\n          {/* Items List */}\r\n          <div className={styles.summaryLine}>\r\n            <span>\r\n              <strong>Ingredients</strong>\r\n            </span>\r\n            <span>\r\n              <strong>Each</strong>\r\n            </span>\r\n          </div>\r\n          <div className={styles.itemsList}>\r\n            {summary.map(({ name, price, count }, i) => (\r\n              <div key={name + i} className={styles.summaryLine}>\r\n                <span>\r\n                  {name} {count > 1 && <strong>{`x${count}`}</strong>}\r\n                </span>\r\n                <span>${price.toFixed(2)}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {/* Total */}\r\n          <div className={`${styles.summaryLine} ${styles.total}`}>\r\n            <h4>\r\n              <strong>Total:</strong>\r\n            </h4>\r\n            <h4>\r\n              <strong>${total}</strong>\r\n            </h4>\r\n          </div>\r\n          {/* Card Fields */}\r\n          <div className={styles.formWrap}>\r\n            <CheckoutForm total={Number(total)} onSuccess={onSuccess} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutModal;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CheckoutModal\":\"CheckoutModal_CheckoutModal__ts8AG\",\"success\":\"CheckoutModal_success__HGLuw\",\"container\":\"CheckoutModal_container__cgpLW\",\"summaryLine\":\"CheckoutModal_summaryLine__36vjt\",\"total\":\"CheckoutModal_total__HitAb\",\"itemsList\":\"CheckoutModal_itemsList__1_cv1\",\"formWrap\":\"CheckoutModal_formWrap__3gQ6i\",\"head\":\"CheckoutModal_head__2oRIW\",\"close\":\"CheckoutModal_close__1yTU8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CheckoutForm\":\"CheckoutForm_CheckoutForm__3Y6jP\",\"input\":\"CheckoutForm_input__29m5y\",\"line2\":\"CheckoutForm_line2__1l7PH\"};"],"sourceRoot":""}